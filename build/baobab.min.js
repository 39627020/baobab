!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Baobab=e()}}(function(){var e;return function t(e,o,n){function s(i,a){if(!o[i]){if(!e[i]){var l="function"==typeof require&&require;if(!a&&l)return l(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var d=o[i]={exports:{}};e[i][0].call(d.exports,function(t){var o=e[i][1][t];return s(o?o:t)},d,d.exports,t,e,o,n)}return o[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e,t){t.exports={autoCommit:!0,clone:!1,delay:!0,maxHistory:0}},{}],2:[function(e,t){var o=e("./src/baobab.js");Object.defineProperty(o,"version",{value:"0.0.1"}),t.exports=o},{"./src/baobab.js":52}],3:[function(e,t){function o(){}var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,o="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var n=[];if(t){var s=document.createElement("div"),r=new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})});return r.observe(s,{attributes:!0}),function(e){n.length||s.setAttribute("yes","no"),n.push(e)}}return o?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var o=n.shift();o()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=o,n.addListener=o,n.once=o,n.off=o,n.removeListener=o,n.removeAllListeners=o,n.emit=o,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],4:[function(t,o,n){(function(){"use strict";var t={once:"boolean",scope:"object"},s=function(){this._enabled=!0,this._children=[],this._handlers={},this._handlersAll=[]};s.prototype.on=function(e,o,n){var r,i,a,l,u,d;if("function"==typeof o){for(u="string"==typeof e?[e]:e,r=0,i=u.length;r!==i;r+=1)if(l=u[r]){this._handlers[l]||(this._handlers[l]=[]),d={handler:o};for(a in n||{}){if(!t[a])throw new Error('The option "'+a+'" is not recognized by Emmett.');d[a]=n[a]}this._handlers[l].push(d)}}else if(e&&"object"==typeof e&&!Array.isArray(e))for(l in e)s.prototype.on.call(this,l,e[l],o);else{if("function"!=typeof e)throw new Error("Wrong arguments.");d={handler:e};for(a in n||{}){if(!t[a])throw new Error('The option "'+a+'" is not recognized by Emmett.');d[a]=n[a]}this._handlersAll.push(d)}return this},s.prototype.once=function(e,t,o){if("function"==typeof t)o=o||{},o.once=!0,this.on(e,t,o);else{if((!e||"object"!=typeof e||Array.isArray(e))&&"function"!=typeof e)throw new Error("Wrong arguments.");t=t||{},t.once=!0,this.on(e,t)}return this},s.prototype.off=function(e,t){var o,n,s,r,i,a,l,u="string"==typeof e?[e]:e;if(1===arguments.length&&"function"==typeof u){t=arguments[0];for(i in this._handlers){for(a=[],o=0,n=this._handlers[i].length;o!==n;o+=1)this._handlers[i][o].handler!==t&&a.push(this._handlers[i][o]);this._handlers[i]=a}for(a=[],o=0,n=this._handlersAll.length;o!==n;o+=1)this._handlersAll[o].handler!==t&&a.push(this._handlersAll[o]);this._handlersAll=a}else if(2===arguments.length)for(o=0,n=u.length;o!==n;o+=1){if(l=u[o],this._handlers[l]){for(a=[],s=0,r=this._handlers[l].length;s!==r;s+=1)this._handlers[l][s].handler!==t&&a.push(this._handlers[l][s]);this._handlers[l]=a}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}return this},s.prototype.unbindAll=function(){var e;this._handlersAll=[];for(e in this._handlers)delete this._handlers[e];return this},s.prototype.emit=function(e,t){var o,n,s,r,i,a,l,u,d,h="string"==typeof e?[e]:e;if(!this._enabled)return this;for(t=void 0===t?{}:t,o=0,n=h.length;o!==n;o+=1)if(d=h[o],u=(this._handlers[d]||[]).concat(this._handlersAll),u.length){for(a={type:d,data:t||{},target:this},i=[],s=0,r=u.length;s!==r;s+=1)u[s].handler.call("scope"in u[s]?u[s].scope:this,a),u[s].once||i.push(u[s]);this._handlers[d]=i}for(o=0,n=this._children.length;o!==n;o+=1)l=this._children[o],l.emit.apply(l,arguments);return this},s.prototype.child=function(){var e=this,t=new s;return t.on("emmett:kill",function(){if(e._children)for(var o=0,n=e._children.length;n>o;o++)if(e._children[o]===t){e._children.splice(o,1);break}}),this._children.push(t),t},s.prototype.kill=function(){if(this.emit("emmett:kill"),this.unbindAll(),this._handlers=null,this._handlersAll=null,this._enabled=!1,this._children)for(var e=0,t=this._children.length;t>e;e++)this._children[e].kill();this._children=null},s.prototype.disable=function(){return this._enabled=!1,this},s.prototype.enable=function(){return this._enabled=!0,this},s.version="2.1.1","undefined"!=typeof n?("undefined"!=typeof o&&o.exports&&(n=o.exports=s),n.Emitter=s):"function"==typeof e&&e.amd?e("emmett",[],function(){return s}):this.Emitter=s}).call(this)},{}],5:[function(e,t){function o(e,t,o){return n(e,!0,"function"==typeof t&&s(t,o,1))}var n=e("lodash._baseclone"),s=e("lodash._basecreatecallback");t.exports=o},{"lodash._baseclone":6,"lodash._basecreatecallback":28}],6:[function(e,t){function o(e,t,c,p,_){if(c){var m=c(e);if("undefined"!=typeof m)return m}var j=l(e);if(!j)return e;var E=x.call(e);if(!w[E])return e;var A=k[E];switch(E){case f:case y:return new A(+e);case b:case v:return new A(e);case g:return m=A(e.source,h.exec(e)),m.lastIndex=e.lastIndex,m}var O=a(e);if(t){var U=!p;p||(p=i()),_||(_=i());for(var Y=p.length;Y--;)if(p[Y]==e)return _[Y];m=O?A(e.length):{}}else m=O?d(e):n({},e);return O&&($.call(e,"index")&&(m.index=e.index),$.call(e,"input")&&(m.input=e.input)),t?(p.push(e),_.push(m),(O?s:r)(e,function(e,n){m[n]=o(e,t,c,p,_)}),U&&(u(p),u(_)),m):m}var n=e("lodash.assign"),s=e("lodash.foreach"),r=e("lodash.forown"),i=e("lodash._getarray"),a=e("lodash.isarray"),l=e("lodash.isobject"),u=e("lodash._releasearray"),d=e("lodash._slice"),h=/\w*$/,c="[object Arguments]",p="[object Array]",f="[object Boolean]",y="[object Date]",_="[object Function]",b="[object Number]",m="[object Object]",g="[object RegExp]",v="[object String]",w={};w[_]=!1,w[c]=w[p]=w[f]=w[y]=w[b]=w[m]=w[g]=w[v]=!0;var j=Object.prototype,x=j.toString,$=j.hasOwnProperty,k={};k[p]=Array,k[f]=Boolean,k[y]=Date,k[_]=Function,k[m]=Object,k[b]=Number,k[g]=RegExp,k[v]=String,t.exports=o},{"lodash._getarray":7,"lodash._releasearray":9,"lodash._slice":12,"lodash.assign":13,"lodash.foreach":18,"lodash.forown":19,"lodash.isarray":24,"lodash.isobject":26}],7:[function(e,t){function o(){return n.pop()||[]}var n=e("lodash._arraypool");t.exports=o},{"lodash._arraypool":8}],8:[function(e,t){var o=[];t.exports=o},{}],9:[function(e,t){function o(e){e.length=0,n.length<s&&n.push(e)}var n=e("lodash._arraypool"),s=e("lodash._maxpoolsize");t.exports=o},{"lodash._arraypool":10,"lodash._maxpoolsize":11}],10:[function(e,t){t.exports=e(8)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash._getarray/node_modules/lodash._arraypool/index.js":8}],11:[function(e,t){var o=40;t.exports=o},{}],12:[function(e,t){function o(e,t,o){t||(t=0),"undefined"==typeof o&&(o=e?e.length:0);for(var n=-1,s=o-t||0,r=Array(0>s?0:s);++n<s;)r[n]=e[t+n];return r}t.exports=o},{}],13:[function(e,t){var o=e("lodash._basecreatecallback"),n=e("lodash.keys"),s=e("lodash._objecttypes"),r=function(e,t,r){var i,a=e,l=a;if(!a)return l;var u=arguments,d=0,h="number"==typeof r?2:u.length;if(h>3&&"function"==typeof u[h-2])var c=o(u[--h-1],u[h--],2);else h>2&&"function"==typeof u[h-1]&&(c=u[--h]);for(;++d<h;)if(a=u[d],a&&s[typeof a])for(var p=-1,f=s[typeof a]&&n(a),y=f?f.length:0;++p<y;)i=f[p],l[i]=c?c(l[i],a[i]):a[i];return l};t.exports=r},{"lodash._basecreatecallback":28,"lodash._objecttypes":14,"lodash.keys":15}],14:[function(e,t){var o={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};t.exports=o},{}],15:[function(e,t){var o=e("lodash._isnative"),n=e("lodash.isobject"),s=e("lodash._shimkeys"),r=o(r=Object.keys)&&r,i=r?function(e){return n(e)?r(e):[]}:s;t.exports=i},{"lodash._isnative":16,"lodash._shimkeys":17,"lodash.isobject":26}],16:[function(e,t){function o(e){return"function"==typeof e&&r.test(e)}var n=Object.prototype,s=n.toString,r=RegExp("^"+String(s).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");t.exports=o},{}],17:[function(e,t){var o=e("lodash._objecttypes"),n=Object.prototype,s=n.hasOwnProperty,r=function(e){var t,n=e,r=[];if(!n)return r;if(!o[typeof e])return r;for(t in n)s.call(n,t)&&r.push(t);return r};t.exports=r},{"lodash._objecttypes":14}],18:[function(e,t){function o(e,t,o){var r=-1,i=e?e.length:0;if(t=t&&"undefined"==typeof o?t:n(t,o,3),"number"==typeof i)for(;++r<i&&t(e[r],r,e)!==!1;);else s(e,t);return e}var n=e("lodash._basecreatecallback"),s=e("lodash.forown");t.exports=o},{"lodash._basecreatecallback":28,"lodash.forown":19}],19:[function(e,t){var o=e("lodash._basecreatecallback"),n=e("lodash.keys"),s=e("lodash._objecttypes"),r=function(e,t,r){var i,a=e,l=a;if(!a)return l;if(!s[typeof a])return l;t=t&&"undefined"==typeof r?t:o(t,r,3);for(var u=-1,d=s[typeof a]&&n(a),h=d?d.length:0;++u<h;)if(i=d[u],t(a[i],i,e)===!1)return l;return l};t.exports=r},{"lodash._basecreatecallback":28,"lodash._objecttypes":20,"lodash.keys":21}],20:[function(e,t){t.exports=e(14)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash._objecttypes/index.js":14}],21:[function(e,t){t.exports=e(15)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash.keys/index.js":15,"lodash._isnative":22,"lodash._shimkeys":23,"lodash.isobject":26}],22:[function(e,t){t.exports=e(16)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":16}],23:[function(e,t){t.exports=e(17)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash._shimkeys/index.js":17,"lodash._objecttypes":20}],24:[function(e,t){var o=e("lodash._isnative"),n="[object Array]",s=Object.prototype,r=s.toString,i=o(i=Array.isArray)&&i,a=i||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&r.call(e)==n||!1};t.exports=a},{"lodash._isnative":25}],25:[function(e,t){t.exports=e(16)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":16}],26:[function(e,t){function o(e){return!(!e||!n[typeof e])}var n=e("lodash._objecttypes");t.exports=o},{"lodash._objecttypes":27}],27:[function(e,t){t.exports=e(14)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash._objecttypes/index.js":14}],28:[function(e,t){function o(e,t,o){if("function"!=typeof e)return s;if("undefined"==typeof t||!("prototype"in e))return e;var d=e.__bindData__;if("undefined"==typeof d&&(i.funcNames&&(d=!e.name),d=d||!i.funcDecomp,!d)){var h=u.call(e);i.funcNames||(d=!a.test(h)),d||(d=l.test(h),r(e,d))}if(d===!1||d!==!0&&1&d[1])return e;switch(o){case 1:return function(o){return e.call(t,o)};case 2:return function(o,n){return e.call(t,o,n)};case 3:return function(o,n,s){return e.call(t,o,n,s)};case 4:return function(o,n,s,r){return e.call(t,o,n,s,r)}}return n(e,t)}var n=e("lodash.bind"),s=e("lodash.identity"),r=e("lodash._setbinddata"),i=e("lodash.support"),a=/^\s*function[ \n\r\t]+\w/,l=/\bthis\b/,u=Function.prototype.toString;t.exports=o},{"lodash._setbinddata":29,"lodash.bind":32,"lodash.identity":48,"lodash.support":49}],29:[function(e,t){var o=e("lodash._isnative"),n=e("lodash.noop"),s={configurable:!1,enumerable:!1,value:null,writable:!1},r=function(){try{var e={},t=o(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(s){}return n}(),i=r?function(e,t){s.value=t,r(e,"__bindData__",s)}:n;t.exports=i},{"lodash._isnative":30,"lodash.noop":31}],30:[function(e,t){t.exports=e(16)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":16}],31:[function(e,t){function o(){}t.exports=o},{}],32:[function(e,t){function o(e,t){return arguments.length>2?n(e,17,s(arguments,2),null,t):n(e,1,null,null,t)}var n=e("lodash._createwrapper"),s=e("lodash._slice");t.exports=o},{"lodash._createwrapper":33,"lodash._slice":47}],33:[function(e,t){function o(e,t,a,d,h,c){var p=1&t,f=2&t,y=4&t,_=16&t,b=32&t;if(!f&&!r(e))throw new TypeError;_&&!a.length&&(t&=-17,_=a=!1),b&&!d.length&&(t&=-33,b=d=!1);var m=e&&e.__bindData__;if(m&&m!==!0)return m=i(m),m[2]&&(m[2]=i(m[2])),m[3]&&(m[3]=i(m[3])),!p||1&m[1]||(m[4]=h),!p&&1&m[1]&&(t|=8),!y||4&m[1]||(m[5]=c),_&&l.apply(m[2]||(m[2]=[]),a),b&&u.apply(m[3]||(m[3]=[]),d),m[1]|=t,o.apply(null,m);var g=1==t||17===t?n:s;return g([e,t,a,d,h,c])}var n=e("lodash._basebind"),s=e("lodash._basecreatewrapper"),r=e("lodash.isfunction"),i=e("lodash._slice"),a=[],l=a.push,u=a.unshift;t.exports=o},{"lodash._basebind":34,"lodash._basecreatewrapper":40,"lodash._slice":47,"lodash.isfunction":46}],34:[function(e,t){function o(e){function t(){if(a){var e=i(a);l.apply(e,arguments)}if(this instanceof t){var r=n(o.prototype),d=o.apply(r,e||arguments);return s(d)?d:r}return o.apply(u,e||arguments)}var o=e[0],a=e[2],u=e[4];return r(t,e),t}var n=e("lodash._basecreate"),s=e("lodash.isobject"),r=e("lodash._setbinddata"),i=e("lodash._slice"),a=[],l=a.push;t.exports=o},{"lodash._basecreate":35,"lodash._setbinddata":29,"lodash._slice":47,"lodash.isobject":38}],35:[function(e,t){(function(o){function n(e){return r(e)?i(e):{}}var s=e("lodash._isnative"),r=e("lodash.isobject"),i=(e("lodash.noop"),s(i=Object.create)&&i);i||(n=function(){function e(){}return function(t){if(r(t)){e.prototype=t;var n=new e;e.prototype=null}return n||o.Object()}}()),t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._isnative":36,"lodash.isobject":38,"lodash.noop":37}],36:[function(e,t){t.exports=e(16)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":16}],37:[function(e,t){t.exports=e(31)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":31}],38:[function(e,t){t.exports=e(26)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.isobject/index.js":26,"lodash._objecttypes":39}],39:[function(e,t){t.exports=e(14)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash._objecttypes/index.js":14}],40:[function(e,t){function o(e){function t(){var e=f?c:this;if(d){var r=i(d);l.apply(r,arguments)}if((h||_)&&(r||(r=i(arguments)),h&&l.apply(r,h),_&&r.length<p))return u|=16,o([a,b?u:-4&u,r,null,c,p]);if(r||(r=arguments),y&&(a=e[m]),this instanceof t){e=n(a.prototype);var g=a.apply(e,r);return s(g)?g:e}return a.apply(e,r)}var a=e[0],u=e[1],d=e[2],h=e[3],c=e[4],p=e[5],f=1&u,y=2&u,_=4&u,b=8&u,m=a;return r(t,e),t}var n=e("lodash._basecreate"),s=e("lodash.isobject"),r=e("lodash._setbinddata"),i=e("lodash._slice"),a=[],l=a.push;t.exports=o},{"lodash._basecreate":41,"lodash._setbinddata":29,"lodash._slice":47,"lodash.isobject":44}],41:[function(e,t){t.exports=e(35)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._basecreatecallback/node_modules/lodash.bind/node_modules/lodash._createwrapper/node_modules/lodash._basebind/node_modules/lodash._basecreate/index.js":35,"lodash._isnative":42,"lodash.isobject":44,"lodash.noop":43}],42:[function(e,t){t.exports=e(16)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":16}],43:[function(e,t){t.exports=e(31)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._basecreatecallback/node_modules/lodash._setbinddata/node_modules/lodash.noop/index.js":31}],44:[function(e,t){t.exports=e(26)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.isobject/index.js":26,"lodash._objecttypes":45}],45:[function(e,t){t.exports=e(14)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash._objecttypes/index.js":14}],46:[function(e,t){function o(e){return"function"==typeof e}t.exports=o},{}],47:[function(e,t){t.exports=e(12)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash._slice/index.js":12}],48:[function(e,t){function o(e){return e}t.exports=o},{}],49:[function(e,t){(function(o){var n=e("lodash._isnative"),s=/\bthis\b/,r={};r.funcDecomp=!n(o.WinRTError)&&s.test(function(){return this}),r.funcNames="string"==typeof Function.name,t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._isnative":50}],50:[function(e,t){t.exports=e(16)},{"/Users/Yomgui/code/baobab/node_modules/lodash.clonedeep/node_modules/lodash._baseclone/node_modules/lodash.assign/node_modules/lodash.keys/node_modules/lodash._isnative/index.js":16}],51:[function(t,o,n){!function(){"use strict";function t(e){e=e||{};var t={};if(this.add=function(e,o){var n,s,r,i,a,u;if(1===arguments.length){if("object"!==this.get(e))throw new Error("If types.add is called with one argument, this one has to be an object.");n=e,i=n.id,u=n.type}else{if(2!==arguments.length)throw new Error("types.add has to be called with one or two arguments.");if("string"!=typeof e||!e)throw new Error("If types.add is called with more than one argument, the first one must be the string id.");i=e,u=o}if("string"!==this.get(i)||0===i.length)throw new Error("A type requires an string id.");if(void 0!==t[i]&&"proto"!==t[i])throw new Error('The type "'+i+'" already exists.');if(~l.indexOf(i))throw new Error('"'+i+'" is a reserved type name.');t[i]=1,r=(n||{}).proto||[],r=Array.isArray(r)?r:[r],a={};for(s in r)void 0===t[r[s]]&&(t[r[s]]=1,a[r[s]]=1);if("function"!==this.get(u)&&!this.isValid(u))throw new Error("A type requires a valid definition. This one can be a preexistant type or else a function testing given objects.");if(t[i]=void 0===n?{id:i,type:u}:{},void 0!==n)for(s in n)t[i][s]=n[s];for(s in a)s!==i&&delete t[s];return this},this.has=function(e){return!!t[e]},this.get=function(e){return null===e||void 0===e?String(e):a[Object.prototype.toString.call(e)]||"object"},this.check=function(e,o){var n,s,r,i=!1,a=!1,u=this.get(e);if("string"===this.get(o)){n=o.replace(/^[?!]/,"").split(/\|/);for(s in n)if(l.indexOf(n[s])<0&&!(n[s]in t))throw new Error("Invalid type.");o.match(/^\?/)&&(i=!0,o=o.replace(/^\?/,"")),o.match(/^!/)&&(a=!0,o=o.replace(/^!/,""));for(s in n)if(t[n[s]]&&("function"==typeof t[n[s]].type?t[n[s]].type.call(this,e)===!0:this.check(e,t[n[s]].type)))return!a;return null===e||void 0===e?a?!i:i:a?!(~n.indexOf("*")||~n.indexOf(u)):!(!~n.indexOf("*")&&!~n.indexOf(u))}if("object"===this.get(o)){if("object"!==u)return!1;for(r in o)if(!this.check(e[r],o[r]))return!1;for(r in e)if(void 0===o[r])return!1;return!0}if("array"===this.get(o)){if("array"!==u)return!1;if(1!==o.length)throw new Error("Invalid type.");for(r in e)if(!this.check(e[r],o[0]))return!1;return!0}return!1},this.isValid=function(e){var o,n,s;if("string"===this.get(e)){o=e.replace(/^[?!]/,"").split(/\|/);for(s in o)if(l.indexOf(o[s])<0&&!(o[s]in t))return!1;return!0}if("object"===this.get(e)){for(n in e)if(!this.isValid(e[n]))return!1;return!0}return"array"===this.get(e)&&1===e.length?this.isValid(e[0]):!1},this.add("type",function(e){return this.isValid(e)}.bind(this)),this.add("primitive",function(e){return!e||!(e instanceof Object||"object"==typeof e)}),"object"!==this.get(e))throw Error("Invalid argument.");for(var o in e)this.add(o,e[o])}var s,r,i=["Arguments","Boolean","Number","String","Function","Array","Date","RegExp","Object"],a={},l=["*"];for(s in i)r=i[s],l.push(r.toLowerCase()),a["[object "+r+"]"]=r.toLowerCase();var u=t;t.call(u),Object.defineProperty(u,"version",{value:"0.2.1"}),"undefined"!=typeof n?("undefined"!=typeof o&&o.exports&&(n=o.exports=u),n.types=u):"function"==typeof e&&e.amd?e("typology",[],function(){return u}):this.types=u}(this)},{}],52:[function(e,t){function o(e,t){if(!(this instanceof o))return new o(e,t);if(!d.check(e,"object"))throw Error("Baobab: invalid data.");if(s.call(this),this.data=i(e),this._futureUpdate={},this._willUpdate=!1,this._history=[],this.options=u(t,c),this.typology=this.options.typology?d.check(this.options.typology,"typology")?this.options.typology:new r(this.options.typology):new r,this.validate=this.options.validate||null,!this.check())throw Error("Baobab: invalid data");this.mixin=h.baobab(this)}var n=e("./cursor.js"),s=e("emmett"),r=e("typology"),i=e("lodash.clonedeep"),a=e("./helpers.js"),l=e("./update.js"),u=e("./merge.js"),d=e("./typology.js"),h=e("./mixins.js"),c=e("../defaults.json");a.inherits(o,s),o.prototype._stack=function(e){var t=this;if(!d.check(e,"object"))throw Error("Baobab.update: wrong specification.");return this._futureUpdate=u(e,this._futureUpdate),this.options.autoCommit?this.options.delay?(this._willUpdate||(this._willUpdate=!0,a.later(function(){t.commit()})),this):this.commit():this},o.prototype._archive=function(){if(!(this.options.maxHistory<=0)){var e={data:i(this.data)};return this._history.length===this.options.maxHistory&&this._history.pop(),this._history.unshift(e),e}},o.prototype.check=function(){return this.validate?this.typology.check(this.data,this.validate):!0},o.prototype.commit=function(e){var t;if(e)this.data=e.data,t=e.log;else{var o=this._archive();t=l(this.data,this._futureUpdate),o&&(o.log=t)}return this.check()||this.emit("invalid"),this.emit("update",{log:t}),this._futureUpdate={},this._willUpdate=!1,this},o.prototype.select=function(e){if(!e)throw Error("Baobab.select: invalid path.");if(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),!d.check(e,"path"))throw Error("Baobab.select: invalid path.");return new n(this,e)},o.prototype.get=function(e){var t;return arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t=e?a.getIn(this.data,"string"==typeof e?[e]:e):this.data,this.options.clone?i(t):t},o.prototype.getReference=function(e){var t;return arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t=e?a.getIn(this.data,"string"==typeof e?[e]:e):this.data},o.prototype.set=function(e,t){if(arguments.length<2)throw Error("Baobab.set: expects a key and a value.");var o={};return o[e]={$set:t},this.update(o)},o.prototype.update=function(e){return this._stack(e)},o.prototype.hasHistory=function(){return!!this._history.length},o.prototype.getHistory=function(){return this._history},o.prototype.undo=function(){if(!this.hasHistory())throw Error("Baobab.undo: no history recorded, cannot undo.");var e=this._history.shift();this.commit(e)},d.add("baobab",function(e){return e instanceof o}),o.prototype.toJSON=function(){return this.get()},t.exports=o},{"../defaults.json":1,"./cursor.js":53,"./helpers.js":54,"./merge.js":55,"./mixins.js":56,"./typology.js":57,"./update.js":58,emmett:4,"lodash.clonedeep":5,typology:51}],53:[function(e,t){function o(e,t){var o=this;n.call(this),t=t||[],t="string"==typeof t?[t]:t,this.root=e,this.path=t,this.relevant=void 0!==this.getReference(),this.root.on("update",function(e){var t,n,s,r,i,a,l=e.data.log,u=!1;if(!o.path.length)return o.emit("update");e:for(i=0,s=l.length;s>i;i++)for(t=l[i],a=0,r=t.length;r>a&&(n=t[a],n===o.path[a]);a++)if(a+1===r||a+1===o.path.length){u=!0;break e}var d=void 0!==o.getReference();o.relevant?d&&u?o.emit("update"):(o.emit("irrelevant"),o.relevant=!1):d&&u&&(o.emit("relevant"),o.emit("update"),o.relevant=!0)}),this.mixin=s.cursor(this)}var n=e("emmett"),s=e("./mixins.js"),r=e("./helpers.js"),i=e("./typology.js");r.inherits(o,n),o.prototype._stack=function(e){return this.root._stack(r.pathObject(this.path,e)),this},o.prototype.select=function(e){if(!e)throw Error("precursors.Cursor.select: invalid path.");if(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),!i.check(e,"path"))throw Error("precursors.Cursor.select: invalid path.");return new o(this.root,this.path.concat(e))},o.prototype.up=function(){return this.path.length?new o(this.root,this.path.slice(0,-1)):new o(this.root,[])},o.prototype.get=function(e){return arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this.root.get(e?this.path.concat(e):this.path)},o.prototype.getReference=function(e){return arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this.root.getReference(e?this.path.concat(e):this.path)},o.prototype.set=function(e,t){if(arguments.length<2)return this.update({$set:e});var o={};return o[e]={$set:t},this.update(o)},o.prototype.apply=function(e){if("function"!=typeof e)throw Error("baobab.Cursor.apply: argument is not a function.");return this.update({$apply:e})},o.prototype.thread=function(e){if("function"!=typeof e)throw Error("baobab.Cursor.thread: argument is not a function.");return this.update({$thread:e})},o.prototype.push=function(e){return this.update(arguments.length>1?{$push:r.arrayOf(arguments)}:{$push:e})},o.prototype.unshift=function(e){return this.update(arguments.length>1?{$unshift:r.arrayOf(arguments)}:{$unshift:e})},o.prototype.update=function(e){return this._stack(e)},i.add("cursor",function(e){return e instanceof o}),o.prototype.toJSON=function(){return this.get()},t.exports=o},{"./helpers.js":54,"./mixins.js":56,"./typology.js":57,emmett:4}],54:[function(e,t){(function(e){function o(e){return Array.prototype.slice.call(e)}function n(e,t){return function(o){return t(e(o))}}function s(e,t){t=t||[];var o,n,s=e;for(o=0,n=t.length;n>o;o++){if("undefined"==typeof s[t[o]])return;s=s[t[o]]}return s}function r(e,t){var o,n=e.length,s={},r=s;for(n||(s=t),o=0;n>o;o++)r[e[o]]=o+1===n?t:{},r=r[e[o]];return s}function i(e,t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}var a="undefined"==typeof window?e.nextTick:"requestAnimationFrame"in window?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,0)};t.exports={arrayOf:o,compose:n,getIn:s,inherits:i,later:a,pathObject:r}}).call(this,e("_process"))},{_process:3}],55:[function(e,t){function o(e,t){return t in(e||{})}function n(e,t){for(var n=0,s=t.length;s>n;n++)if(o(e,t[n]))return!0;return!1}function s(e,t,n){return o(e,n)&&o(t,n)}function r(){var e,t,o,l,u={},d=arguments.length;for(o=d-1;o>=0;o--)if(n(arguments[o],["$set","$apply","$thread"]))u.$set&&(arguments[o].$apply||arguments[o].$thread)?(delete u.$set,u.$apply=arguments[o].$apply||arguments[o].$thread):u.$apply&&arguments[o].$set?(delete u.$apply,u.$set=arguments[o].$set):arguments[o].$set?u.$set=arguments[o].$set:arguments[o].$apply?u.$apply=arguments[o].$apply:arguments[o].$thread&&(u.$apply=u.$apply?a.compose(u.$apply,arguments[o].$thread):arguments[o].$thread);else for(l in arguments[o])e=u[l],t=arguments[o][l],e&&i.check(t,"object")?s(e,t,"$push")?e.$push=i.check(e.$push,"array")?e.$push.concat(t.$push):[e.$push].concat(t.$push):s(e,t,"$unshift")?e.$unshift=i.check(t.$unshift,"array")?t.$unshift.concat(e.$unshift):[t.$unshift].concat(e.$unshift):u[l]=r(t,e):u[l]=t;return u}var i=e("typology"),a=e("./helpers.js");t.exports=r},{"./helpers.js":54,typology:51}],56:[function(e,t){var o=e("./typology.js");t.exports={baobab:function(e){return{componentWillMount:function(){if(this.baobab=e,this.__type=null,this.cursor&&this.cursors)throw Error("baobab.mixin: you cannot have both `component.cursor` and `component.cursors`. Please make up your mind.");if(this.cursor){if(!o.check(this.cursor,"string|array|cursor"))throw Error("baobab.mixin.cursor: invalid data (cursor, string or array).");this.cursor=e.select(this.cursor),this.__type="single"}else if(this.cursors){if(!o.check(this.cursors,"object|array"))throw Error("baobab.mixin.cursor: invalid data (cursor, object or array).");if(o.check(this.cursors,"array"))this.cursors=this.cursors.map(function(t){return o.check(t,"cursor")?t:e.select(t)}),this.__type="array";else{for(var t in this.cursors)o.check(path,"cursor")||(this.cursors[t]=e.select(this.cursors[t]));this.__type="object"}}var n=!1;this.__updateHandler=function(){n||(this.forceUpdate(),n=!0,setTimeout(function(){n=!1},0))}.bind(this)},componentDidMount:function(){if("single"===this.__type)this.cursor.on("update",this.__updateHandler);else if("array"===this.__type)this.cursors.forEach(function(e){e.on("update",this.__updateHandler)},this);else if("object"===this.__type)for(var e in this.cursors)cursors[e].on("update",this.__updateHandler)},componentWillUnmount:function(){if("single"===this.__type)this.cursor.off("update",this.__updateHandler);else if("array"===this.__type)this.cursors.forEach(function(e){e.off("update",this.__updateHandler)},this);else if("object"===this.__type)for(var e in this.cursors)cursors[e].off("update",this.__updateHandler)}}},cursor:function(e){return{componentWillMount:function(){this.cursor=e,this.__updateHandler=function(){this.forceUpdate()}.bind(this)},componentDidMount:function(){this.cursor.on("update",this.__updateHandler)},componentWillUnmount:function(){this.cursor.off("update",this.__updateHandler)}}}}},{"./typology.js":57}],57:[function(e,t){var o=e("typology"),n=new o({path:function(e){return this.check(e,"?string|number")||this.check(e,["string"])},typology:function(e){return e instanceof o}});t.exports=n},{typology:51}],58:[function(e,t){function o(e,t){var o=new Error("precursors.update: "+t+' at path "/'+e.toString()+'"');return o.path=e,o}function n(e,t,s,a){a=a||[];var l,u,d,h,c=a.join("$$");for(d in s)if(i[d])switch(h=s[d],c&&!e[c]&&(e[c]=!0),d){case"$push":if(!r.check(t,"array"))throw o(a,"using command $push to a non array");r.check(h,"array")?t.push.apply(t,h):t.push(h);break;case"$unshift":if(!r.check(t,"array"))throw o(a,"using command $unshift to a non array");r.check(h,"array")?t.unshift.apply(t,h):t.unshift(h)}else if("$set"in(s[d]||{}))u=c?c+"$$"+d:d,h=s[d].$set,u&&!e[u]&&(e[u]=!0),t[d]=h;else if("$apply"in(s[d]||{})){if(u=c?c+"$$"+d:d,l=s[d].$apply,"function"!=typeof l)throw o(a.concat(d),"using command $apply with a non function");u&&!e[u]&&(e[u]=!0),t[d]=l.call(null,t[d])}else"undefined"==typeof t[d]&&(t[d]={}),n(e,t[d],s[d],a.concat(d))}function s(e,t){var o={};return n(o,e,t),Object.keys(o).map(function(e){return e.split("$$")})}var r=e("./typology.js"),i={};["$set","$push","$unshift","$apply"].forEach(function(e){i[e]=!0}),t.exports=s},{"./typology.js":57}]},{},[2])(2)});